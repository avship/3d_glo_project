(()=>{"use strict";function e({timing:e,draw:t,duration:r}){let l=performance.now();requestAnimationFrame((function a(s){let n=(s-l)/r;n>1&&(n=1);let o=e(n);t(o),n<1&&requestAnimationFrame(a)}))}const t=({formId:e,someElem:t=[]})=>{const r=document.querySelector(`#${e}`),l=document.createElement("div"),a=e=>{let t=!0;return 11!=e.value.trim().replace(/[^\d]/g,"").length&&(t=!1),t},s=e=>{let t=!0;return/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(String(e.value).toLowerCase())&&""!==e.value?e.classList.remove("error"):(e.classList.add("error"),t=!1),t},n=e=>{let t=!0;return e.value.length<2&&(e.classList.add("error"),t=!1),e.value.length>=2&&e.classList.remove("error"),t},o=e=>{"user_name"!==e.getAttribute("name")||e.classList.contains("not-sent")||n(e),"user_email"!==e.getAttribute("name")||e.classList.contains("not-sent")||s(e),"user_phone"!==e.getAttribute("name")||e.classList.contains("not-sent")||a(e)};try{if(!r)throw new Error("Вернииите формту на место, пожААААААлуйста!!!");r.querySelectorAll("input").forEach((e=>{e.classList.add("not-sent")})),r.addEventListener("input",(e=>{e.target.value=e.target.value.trim(),o(e.target)})),r.addEventListener("submit",(e=>{e.preventDefault(),r.querySelectorAll("input").forEach((e=>{e.classList.remove("not-sent"),o(e)}));let c=!0;r.querySelectorAll("input").forEach(((e,t)=>{e.value=e.value.trim(),e.classList.contains("error")&&(c=!1),""===e.value&&"user_message"!==e.getAttribute("name")&&(e.classList.add("error"),c=!1)})),c&&((()=>{const e=r.querySelectorAll("input"),o=new FormData(r),c={};var i;l.style.color="#FFF",l.textContent="Загрузка...",r.append(l),o.forEach(((e,t)=>{""!==e.trim()&&(c[t]=e)})),t.forEach((e=>{const t=document.getElementById(e.id);t&&("block"===e.type&&""!==t.textContent.trim()&&"0"!==t.textContent.trim()&&(c[e.id]=t.textContent.trim()),"input"===e.type&&""!==t.value.trim()&&"0"!==t.value.trim()&&(c[e.id]=t.value.trim()))})),(e=>{let t=!0;const l=r.querySelector('input[name="user_name"]'),o=r.querySelector('input[name="user_email"]'),c=r.querySelector('input[name="user_phone"]');return n(l)&&s(o)&&a(c)||(t=!1),t})()&&(i=c,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{console.log(t),e.forEach((e=>{e.value=""})),r.closest(".popup")&&(l.style.color="#FFF"),l.textContent="Спасибо, наш менеджер встретится с вами",setTimeout((()=>{l.textContent=""}),4e3)})).catch((e=>{r.closest(".popup")&&(l.style.color="#FFF"),l.textContent="Ошибка...",setTimeout((()=>{l.textContent=""}),3e3)}))})(),r.querySelectorAll("input").forEach((e=>{e.classList.contains("error")&&(e.value="")})),r.closest(".popup")&&setTimeout((()=>{r.closest(".popup").style.display="none"}),3e3))}))}catch(e){console.log(e.message)}};(e=>{const t=document.getElementById("timer-hours"),r=document.getElementById("timer-minutes"),l=document.getElementById("timer-seconds");let a=null;const s=e=>{const{hours:s,minutes:n,seconds:o}=(e=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3;return{hours:Math.floor(t/60/60),minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)}})(e);+s+ +n+ +o<0?clearInterval(a):(t.textContent=String(s).padStart(2,"0"),r.textContent=String(n).padStart(2,"0"),l.textContent=String(o).padStart(2,"0"))};s(e),a=setInterval(s,1e3,e)})("7 august 2022"),(()=>{const t=document.querySelector("menu"),r=t=>{const r=t.getBoundingClientRect().top;console.log(r);const l=r/1e3;console.log(l),e({duration:1e3,timing:e=>e,draw(e){document.documentElement.scrollBy(0,l),document.documentElement.scrollTop=r*e,console.log(document.documentElement.scrollTop,r)}})};document.body.addEventListener("click",(e=>{(e=>{e.target.closest(".close-btn")||e.target.closest(".menu")?(e.preventDefault(),t.classList.toggle("active-menu")):e.target.closest("menu")&&"A"===e.target.tagName?(e=>{if(e.preventDefault(),t.classList.toggle("active-menu"),"A"===e.path[0].tagName){const t=e.target.getAttribute("href"),l=document.querySelector(t);r(l)}})(e):e.target.closest("#next_section")?(e.preventDefault(),t.classList.contains("active-menu")&&t.classList.remove("active-menu"),r(e.target.closest("#next_section"))):!e.target.closest("menu")&&t.classList.contains("active-menu")&&t.classList.remove("active-menu")})(e)}))})(),(()=>{const t=document.querySelector(".popup"),r=document.querySelectorAll(".popup-btn"),l=(t.querySelector(".popup-close"),t.querySelector(".popup-content"));r.forEach((r=>r.addEventListener("click",(()=>{if(l.style.top="-100%",t.style.display="block",document.documentElement.clientWidth>=768){const t=parseInt(l.style.top);e({duration:1e3,timing:e=>e,draw(e){l.style.top=`${t+(Math.abs(t)+30)*e}%`}})}else l.style.top="30%"})))),t.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.closest(".popup-close")||(t.style.display="none",document.querySelectorAll(".popup input").forEach((e=>{e.classList.remove("error")})))}))})(),(()=>{const e=e=>{e.target.value=e.target.value.replace(/\D+/,"")},t=e=>{e.target.value=e.target.value.replace(/[^А-Яа-яёЁ \-]/,"")},r=e=>{e.target.value=e.target.value.replace(/[^\w@\.\-\_\!\~\*]/,"")},l=document.querySelectorAll(".calc-block input"),a=document.querySelector("#form2-message"),s=document.querySelectorAll(".form-email");document.querySelectorAll(".form-phone"),document.querySelectorAll('input[placeholder="Ваше имя"]').forEach((e=>{e.addEventListener("input",(e=>{t(e),e.target.value=e.target.value.split(" ").map((e=>e.slice(0,1).toUpperCase()+e.slice(1))).join(" ")})),e.addEventListener("blur",(e=>{e.target.value=e.target.value.trim(),e.target.value=e.target.value.replace(/[\- ]+$/g,""),e.target.value=e.target.value.replace(/^[\- ]+/g,""),e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.replace(/\.+/g,"."),e.target.value=e.target.value.replace(/ +/g," ")}))})),l.forEach((t=>{t.addEventListener("input",e)})),a.addEventListener("input",t),a.addEventListener("blur",(e=>{t(e),e.target.value=e.target.value.trim(),e.target.value=e.target.value.replace(/ +/g," "),e.target.value=e.target.value.replace(/\-+/g,"-"),e.target.value=e.target.value.slice(0,1).toUpperCase()+e.target.value.slice(1)})),s.forEach((e=>{e.addEventListener("input",r),e.addEventListener("blur",(e=>{e.target.value=e.target.value.replace(/\-+$/g,""),e.target.value=e.target.value.replace(/^\-+/g,""),e.target.value=e.target.value.replace(/@+/g,"@"),e.target.value=e.target.value.replace(/\.+/g,".")}))}))})(),(()=>{const e=document.querySelectorAll(".service-tab"),t=document.querySelectorAll(".service-header-tab");document.querySelector(".service-header").addEventListener("click",(r=>{if(r.target.closest(".service-header-tab")){const l=r.target.closest(".service-header-tab");t.forEach(((t,r)=>{t===l?(t.classList.add("active"),e[r].classList.remove("d-none")):(t.classList.remove("active"),e[r].classList.add("d-none"))}))}}))})(),(e=>{let{sliderClass:t=null,sliderItemsClass:r=null,sliderItemsClassActive:l="slide-active",arrows:a=!1,arrowLeftClass:s="slider-arrow-left",arrowRightClass:n="slider-arrow-rught",dots:o=!1,dotsParams:{dotContainer:c="dot-container",dotItemClass:i="item-dot",dotActiveClass:u="active-dot"}={},debug:d=!1,timerInterval:m=2e3}=e;const g=[];if(t||g.push("Не указан класс контейнера слайдера"),r||g.push("Не указано класс элемента слайдера"),g.length)return void(d&&console.log("Ошибки слайдера",g));m=isNaN(parseInt(m))?2e3:parseInt(m),"."!==t.slice(0,1)&&(t=`.${t}`),"."!==r.slice(0,1)&&(r=`.${r}`),"."!==c.slice(0,1)&&(c=`.${c}`),"."!==i.slice(0,1)&&(i=`.${i}`);const p=document.querySelector(t);null===p&&g.push("В вёрстке отсутствует дом элемент, где будет располагаться слайдер");const v=document.querySelectorAll(r);if(v.length||g.push("Нет ни одного слайда на странице"),g.length)return void(d&&console.log("Ошибки слайдере",g));let h,y;var f;o&&(h=document.createElement("ul"),h.classList.add(c.slice(1)),p.appendChild(h),f=h,v.forEach(((e,t)=>{const r=document.createElement("li");r.classList.add(i.slice(1)),0===t&&r.classList.add("dot-active"),f.appendChild(r)})),y=document.querySelectorAll(i)),y&&y.length||(o=!1),a&&[s,n].forEach(((e,t)=>{const r=document.createElement("a");e.split(" ").forEach((e=>{(e=e.trim())&&("."===e.slice(0,1)&&(e=e.slice(1)),r.classList.add(e)),r.classList.add("slider-btn-handler"),0===t?r.classList.add("slider-btn-handler-prev"):r.classList.add("slider-btn-handler-next")})),p.appendChild(r)}));let L,E=0;const b=(e,t,r)=>{e[t].classList.remove(r)},S=(e,t,r)=>{e[t].classList.add(r)},C=()=>{b(v,E,l),o&&b(y,E,u),E++,E>=v.length&&(E=0),S(v,E,l),o&&S(y,E,u)},q=()=>{L=setInterval(C,m)};q(),p.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(i)&&(b(v,E,l),b(y,E,u),y.forEach(((t,r)=>{t===e.target&&(E=r)})),S(v,E,l),S(y,E,u)),(e.target.matches(".slider-btn-handler-next")||e.target.matches(".slider-btn-handler-prev"))&&(a&&b(v,E,l),o&&b(y,E,u),e.target.matches(".slider-btn-handler-next")&&(E++,E>=v.length&&(E=0)),e.target.matches(".slider-btn-handler-prev")&&(E--,E<0&&(E=v.length-1)),e.target.classList.contains(i)&&y.forEach(((t,r)=>{t===e.target&&(E=r)})),a&&S(v,E,l),o&&S(y,E,u))})),p.addEventListener("mouseenter",(e=>{(e.target.classList.contains("slider-btn-handler-next")||e.target.classList.contains("slider-btn-handler-prev")||e.target.classList.contains(i.slice(1)))&&clearInterval(L)}),!0),p.addEventListener("mouseleave",(e=>{(e.target.classList.contains("slider-btn-handler-next")||e.target.classList.contains(i.slice(1))||e.target.classList.contains("slider-btn-handler-prev"))&&q()}),!0)})({sliderClass:"portfolio-content",sliderItemsClass:"portfolio-item",sliderItemsClassActive:"portfolio-item-active",arrows:!0,arrowLeftClass:"portfolio-btn prev",arrowRightClass:"portfolio-btn next",dots:!0,dotsParams:{dotContainer:"portfolio-dots",dotItemClass:"dot",dotActiveClass:"dot-active"},debug:!0,timerInterval:2e3}),((t=100)=>{const r=document.querySelector(".calc-block"),l=r.querySelector("select"),a=r.querySelector(".calc-square"),s=r.querySelector(".calc-count"),n=r.querySelector(".calc-day"),o=r.querySelector("#total");r.addEventListener("input",(r=>{r.target!==l&&r.target!==a&&r.target!==s&&r.target!==n||(()=>{if(!l.selectedIndex||!a.value)return void(o.textContent=0);"0"===n.value&&(n.value="");const r=+l.options[l.selectedIndex].value,c=+a.value;console.log();let i=1,u=1;s.value>1&&(i+=+s.value/10),n.value&&n.value<5?u=2:n.value&&n.value<10&&(u=1.5),console.log(u);let d=t*r*c*i*u;const m=+o.textContent,g=d;m!=d&&e({duration:2e3,timing:e=>e,draw(e){o.textContent=Math.round(m+e*(g-m))}}),o.textContent=Math.round(d)})()}))})(100),t({formId:"form1",someElem:[{type:"block",id:"total"}]}),t({formId:"form3",someElem:[{type:"block",id:"total"}]}),t({formId:"form2",someElem:[{type:"block",id:"total"}]}),function(e,t="+7 (__) --"){const r=document.querySelectorAll(e);function l(e){const r=e.keyCode,l=t,a=l.replace(/\D/g,""),s=this.value.replace(/\D/g,"");console.log(l);let n=0,o=l.replace(/[_\d]/g,(function(e){return n<s.length?s.charAt(n++)||a.charAt(n):e}));n=o.indexOf("_"),-1!=n&&(o=o.slice(0,n));let c=l.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");c=new RegExp("^"+c+"$"),(!c.test(this.value)||this.value.length<5||r>47&&r<58)&&(this.value=o),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of r)e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",l)}('[type="tel"]',"+7 (___) ___-__-__")})();